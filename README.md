# test_app
Добавлено для Effective Mobile (описание тестового проекта)

1 Взаимодействие с пользователем Позволяет пользователям регистрироваться, входить в систему, выходить из учетной записи, обновлять свои данные и удалять аккаунт.

✅ Регистрация: Ввод имени (фамилии, отчества), email, пароля, повтор пароля. ✅ - выполнено
✅ Обновление информации: Пользователь может редактировать свой профиль. ✅ - выполнено
✅ Удаление пользователя: Удаление аккаунта (мягкое) — пользователь инициирует удаление, происходит logout, пользователь больше не может
  залогиниться, но при этом в базе учетная запись остается со статусом is_active=False. ✅ - выполнено (статусы active/ deleted)
✅ Login: пользователь входит в систему по email и паролю. ✅ - выполнено
✅ Logout: пользователь выходит из системы. ✅ - выполнено
✅ После login система при последующих обращениях должна идентифицировать пользователя. ✅ - выполнено (система приветствует пользователя по имени, не допускает на страницу админа)

Дополнительно - в системе две роли: пользователь и администратор. 
  Администратор видит всех пользователей, имеет возможность редактирования, полного удаления профиля, доступ к защищенной странице. ✅ - выполнено

2 Система разграничения прав доступа.

✅ Вы должны продумать и в текстовом файле или в REAME.md описать схему вашей структуры управления ограничениями доступа.
  Для такого простого проекта с двумя ролями доступ разграничил в эндпойнте перехода на запрещенную страницу. В некоторых проектах на текущей работе были реализованы схемы разграничения непосредственно в шаблонах
  HTML. В реальном проекте с количеством ролей от 3 и более за доступ отвечает таблица roles где каждой роли соответствует id ресурсов (страница, запрос данных, действие) с значениями TRUE если доступ разрешен. 
  По этому id в сервисном слое будет определено, какая информация разрешена к показу пользователю ✅ - выполнено
⁉️ Реализованы соответствующие таблицы в БД. -->⁉️ Вы уже опредилитесь между собой - нужны таблицы или нет?) Пунктом ниже условие - написать Mock-View, еще ниже рекомендуемый стэк Postgres. ????
✅ Таблицы заполнены тестовыми данными для минимальной отработки приложения для демонстрации работающей системы.✅ - выполнено Вместо реальных таблиц для демонстрации работы используется запись и чтение в json. json есть в репозитории. 
✅ Если пользователь имеет доступ к ресурсу по вышеописанным правилам, ему выдается запрашиваемый ресурс. Если по входящему запросу не удается определить залогиненного пользователя, выдается
  ошибка 401 Если пользователь определен, но запрашиваемый ресурс ему не доступен 403 ошибка — Forbidden. ✅ - выполнено (Админ имеет доступ к своей странице и защищенному ресурсу, для наглядности определение доступа в эндпойнте через depends, и на странице.)

3 Минимальные вымышленные объекты бизнес-приложения, к которым могла бы применяться созданная система.

✅ Таблицы в БД создавать не требуется. Можно просто написать Mock-View, которые по обращениям будут выдавать список потенциальных объектов или описанные выше ошибки.
Выбор технологий на Ваше усмотрение. Наш совет — DRF + Postgres.
⁉️так нужны или нет таблицы? ) 

 P.S. Даже если не удастся полностью выполнить задание, у обучающегося появится понимание различий между аутентификацией и авторизацией, знания о формировании jwt-токенов, что такое сессии, как
они связаны с вопросами и ответами клиента и сервера, как работает login и logout в системах, как можно управлять безопасностью любого приложения.
⁉️Это как понимать?) не планирую обучаться у Вас) В задании выше ни слова про сессии и jwt- токены, безопасность!)

Так как по условиям нельзи использовать встроенные возможности фреймворка, проверка сессии производится по сроку истечения формируемого jwt токена, либо по наличию токена (удаляется при логауте)
❗️При использовании в реальных проектах пароль дополнительно шифруется и хранится в зашифрованом виде.
❗️В моих реальноых проектах для хранения сессий и кэша данных обычно используется Redis.
❗️Для подключения баз данных достаточно функции из utils переписать в класс с использованием pg8000 или asyncpg
❗️Из эндпойнтов полностью убирается обработка данных в сервисный слой (для которого создается при необходимости класс формирования templates)
❗️В некоторых местах в асинхронных функциях присутствует прямой вызов синхронных функций, что может блокировать поток выполнения: допускается для тестового проекта, изменено для реального
❗️Из my_security в двух случаях поднимается HTTPException вместо возврата значения и отображения результата пользователя исправляется для вэб приложения, в случае переделки на API приемлимо.
❗️Для преобразования приложения в API ДОСТАТОЧНО ИЗМЕНИТЬ RESPONSE_CLASS и виды ответов сервера. 

Спасибо если дочитали до конца) Выполнено по своему усмотрению и в соответствии с имеющимся опытом в разработке.
